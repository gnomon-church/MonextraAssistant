(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),i=n.n(a),r=n(21),s=n.n(r),l=(n(105),n(36)),o=n(13),d=n(215),j=n(219);n(106),n(77);function u(){Object(a.useEffect)((function(){document.title="Home - Mona"}),[]);var e=Object(o.f)();return Object(c.jsx)("div",{id:"card-deck-set",children:Object(c.jsx)(d.a,{children:Object(c.jsx)(j.a,{onClick:function(){e.push("/isimenu")},className:"card-list",style:{width:"18rem"},children:Object(c.jsxs)(j.a.Body,{children:[Object(c.jsx)(j.a.Title,{children:"ISI Management"}),Object(c.jsx)(j.a.Text,{children:"Manage the ISI stock."})]})})})})}var b=n(218),h=n(221);function x(e){var t=Object(o.f)();return"true"===e.proceed?Object(c.jsxs)(b.a,{bg:"danger",className:"justify-content-between",children:[Object(c.jsx)(h.a,{variant:"dark",onClick:function(){t.push(e.from)},children:"Back"}),Object(c.jsx)(h.a,{variant:"success",onClick:function(){t.push(e.to)},children:e.label})]}):"false"===e.proceed?Object(c.jsx)(b.a,{bg:"danger",className:"justify-content-between",children:Object(c.jsx)(h.a,{variant:"dark",onClick:function(){t.push(e.from)},children:"Back"})}):void 0}function O(){Object(a.useEffect)((function(){document.title="ISI Management - Mona"}),[]);var e=Object(o.f)();return Object(c.jsxs)("div",{children:[Object(c.jsx)(x,{proceed:"false",from:"/"}),Object(c.jsxs)("div",{id:"card-deck-set",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(j.a,{onClick:function(){e.push("/isireceive")},className:"card-list",style:{width:"18rem",cursor:"pointer"},children:Object(c.jsxs)(j.a.Body,{children:[Object(c.jsx)(j.a.Title,{children:"Receive"}),Object(c.jsx)(j.a.Text,{children:"Receive shipments of ISI books."})]})})}),Object(c.jsx)("br",{}),Object(c.jsx)(d.a,{children:Object(c.jsx)(j.a,{onClick:function(){e.push("isisignout")},className:"card-list",style:{width:"18rem",cursor:"pointer"},children:Object(c.jsxs)(j.a.Body,{children:[Object(c.jsx)(j.a.Title,{children:"Sign Out"}),Object(c.jsx)(j.a.Text,{children:"Sign ISI books out of the safe"})]})})}),Object(c.jsx)("br",{}),Object(c.jsx)(d.a,{children:Object(c.jsx)(j.a,{onClick:function(){e.push("isireport")},className:"card-list",style:{width:"18rem",cursor:"pointer"},children:Object(c.jsxs)(j.a.Body,{children:[Object(c.jsx)(j.a.Title,{children:"Reports"}),Object(c.jsx)(j.a.Text,{children:"Generate and view various ISI reports"})]})})}),Object(c.jsx)("br",{}),Object(c.jsx)(d.a,{children:Object(c.jsx)(j.a,{onClick:function(){e.push("isimanage")},className:"card-list",style:{width:"18rem",cursor:"pointer"},children:Object(c.jsxs)(j.a.Body,{children:[Object(c.jsx)(j.a.Title,{children:"Manage"}),Object(c.jsx)(j.a.Text,{children:"Manage ISI book types"})]})})})]})]})}var m=n(18),f=n(217),p=n(216),g=n(220),k=n(52),v=n(33),_=n.n(v),y=(n(145),n(146),{game_id:"",ticket_value:"",ticket_name:"",book_value:"",current_game:!0});function C(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(!0),s=Object(m.a)(r,2),l=s[0],o=s[1],d=Object(a.useState)(null),j=Object(m.a)(d,2),u=j[0],b=j[1],O=Object(a.useState)(!1),v=Object(m.a)(O,2),C=v[0],S=v[1],w=Object(a.useState)(!1),N=Object(m.a)(w,2),I=N[0],T=N[1],R=Object(a.useRef)(),D=function(){return S(!1)},M=function(){return S(!0)},B=function(){return T(!1)},A={cellControlButtons:function(e){return Object(c.jsxs)("span",{children:[Object(c.jsx)(h.a,{variant:"outline-secondary",size:"sm",onClick:function(){var t=R.current.getDisplayedRowAtIndex(e.node.rowIndex).data;y.game_id=t.game_id,y.ticket_value=t.ticket_value,y.book_value=t.book_value,y.ticket_name=t.ticket_name,y.current_game=t.current_game,M()},children:"Edit"})," ",Object(c.jsx)(h.a,{variant:"outline-secondary",size:"sm",onClick:function(){b(e.node.rowIndex),T(!0)},children:"Delete"})]})}};function F(){_.a.get("/api/isi-game-types-download").then((function(e){return e.data.rows})).then((function(e){return e.map((function(e){return{game_id:e.game_id,ticket_value:e.ticket_value,ticket_name:e.ticket_name,book_value:e.book_value,current_game:e.current_game}}))})).then((function(e){return i(e)})).then((function(){return R.current.hideOverlay()})).then((function(){return o(!1)}))}function G(e){var t=/^[0-9]*$/.exec(e.target.value);null!==t?(e.target.value=t[0],y[e.target.name]=e.target.value):e.target.value=y[e.target.name]}Object(a.useEffect)((function(){document.title="Manage ISI Types - Mona",F()}),[]);var H=function(){return null!==u?Object(c.jsx)("span",{children:Object(c.jsxs)("i",{children:[R.current.getDisplayedRowAtIndex(u).data.ticket_value," ",R.current.getDisplayedRowAtIndex(u).data.ticket_name," ","(",R.current.getDisplayedRowAtIndex(u).data.game_id,")"]})}):Object(c.jsx)("span",{children:"UNKOWN"})};return Object(c.jsxs)("div",{children:[Object(c.jsx)(x,{proceed:"false",from:"/isimenu"}),Object(c.jsx)("div",{className:"add-isi-button",children:Object(c.jsx)(h.a,{variant:"outline-danger",onClick:l?null:M,children:l?"Loading...":"Add ISI Game"})}),Object(c.jsxs)(f.a,{show:C,onHide:D,backdrop:"static",keyboard:!1,children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsx)(f.a.Title,{children:"ISI Game Details"})}),Object(c.jsxs)(f.a.Body,{children:[Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsx)(p.a.Prepend,{children:Object(c.jsx)(p.a.Text,{children:"Game Number"})}),Object(c.jsx)(g.a,{type:"text",onChange:G,name:"game_id",placeholder:y.game_id})]}),Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsxs)(p.a.Prepend,{children:[Object(c.jsx)(p.a.Text,{children:"Ticket Value"}),Object(c.jsx)(p.a.Text,{children:"$"})]}),Object(c.jsx)(g.a,{type:"text",onChange:G,name:"ticket_value",defaultValue:y.ticket_value})]}),Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsxs)(p.a.Prepend,{children:[Object(c.jsx)(p.a.Text,{children:"Book Value"}),Object(c.jsx)(p.a.Text,{children:"$"})]}),Object(c.jsx)(g.a,{type:"text",onChange:G,name:"book_value",defaultValue:y.book_value})]}),Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsx)(p.a.Prepend,{children:Object(c.jsx)(p.a.Text,{children:"Ticket Name"})}),Object(c.jsx)(g.a,{type:"text",onChange:function(e){y[e.target.name]=e.target.value},name:"ticket_name",defaultValue:y.ticket_name})]}),Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsx)(p.a.Prepend,{children:Object(c.jsx)(p.a.Text,{children:"Current Game?"})}),Object(c.jsx)(p.a.Append,{children:Object(c.jsx)(p.a.Checkbox,{defaultChecked:y.current_game,onChange:function(e){return function(e){y.current_game=e.target.checked}(e)}})})]})]}),Object(c.jsxs)(f.a.Footer,{children:[Object(c.jsx)(h.a,{variant:"secondary",onClick:function(){y={game_id:"",ticket_value:"",ticket_name:"",book_value:"",current_game:!0},D()},children:"Close"}),Object(c.jsx)(h.a,{variant:"success",onClick:function(){D(),o(!0),R.current.showLoadingOverlay(),y.ticket_name=y.ticket_name.toUpperCase(),_.a.post("/api/isi-game-types-upload",y).then((function(){return F()})).then(y={game_id:"",ticket_value:"",ticket_name:"",book_value:"",current_game:!0})},children:"Save"})]})]}),Object(c.jsxs)(f.a,{show:I,onHide:B,backdrop:"static",keyboard:!1,children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsx)(f.a.Title,{children:"Delete Game?"})}),Object(c.jsxs)(f.a.Body,{children:["Are you sure you want to delete the ",Object(c.jsx)(H,{})," game?"]}),Object(c.jsxs)(f.a.Footer,{children:[Object(c.jsx)(h.a,{variant:"secondary",onClick:B,children:"Cancel"}),Object(c.jsx)(h.a,{variant:"danger",onClick:function(){B(),o(!0),R.current.showLoadingOverlay(),_.a.get("/api/isi-game-delete/"+R.current.getDisplayedRowAtIndex(u).data.game_id).then((function(){return F()})).then((function(){return b(null)}))},children:"Delete"})]})]}),Object(c.jsx)("div",{className:"ag-theme-alpine",style:{width:"100%"},children:Object(c.jsx)(k.AgGridReact,{domLayout:"autoHeight",columnDefs:[{headerName:"Game Number",field:"game_id",cellStyle:{"text-align":"center"},suppressMovable:!0,floatingFilter:!0,filter:!0},{headerName:"Ticket Value",field:"ticket_value",cellStyle:{"text-align":"center"},suppressMovable:!0},{headerName:"Ticket Name",field:"ticket_name",cellStyle:{"text-align":"center"},suppressMovable:!0,floatingFilter:!0,filter:!0},{headerName:"Book Value",field:"book_value",cellStyle:{"text-align":"center"},suppressMovable:!0},{headerName:"Current Game?",field:"current_game",colId:"params",cellRenderer:function(e){return"<input type='checkbox' disabled ".concat(e.value?"checked":""," />")},cellStyle:{"text-align":"center"},suppressMovable:!0},{headerName:"",field:"button_field",cellRenderer:"cellControlButtons",cellStyle:{"text-align":"right"},suppressMovable:!0}],defaultColDef:{sortable:!0},gridOptions:{suppressNoRowsOverlay:!0},rowData:n,animateRows:!0,onGridReady:function(e){R.current=e.api,R.current.sizeColumnsToFit()},frameworkComponents:A})})]})}var S=n(97),w=n.n(S),N=(n(149),""),I="",T=[],R={shipment_id:"",date_received:""};function D(){var e=Object(o.f)(),t=Object(a.useState)(!1),n=Object(m.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(!1),l=Object(m.a)(s,2),d=l[0],j=l[1],u=Object(a.useState)(!1),b=Object(m.a)(u,2),O=b[0],v=b[1],y=Object(a.useState)(new Date),C=Object(m.a)(y,2),S=C[0],D=C[1],M=Object(a.useState)(!1),B=Object(m.a)(M,2),A=B[0],F=B[1],G=Object(a.useState)([]),H=Object(m.a)(G,2),E=H[0],P=(H[1],Object(a.useRef)()),V=function(){return r(!1)},$=function(){return j(!1)},L=function(){return v(!1)};Object(a.useEffect)((function(){document.title="Receive ISI - Mona"}),[]);var z=[{headerName:"Book Number",field:"book_number",valueFormatter:function(e){return e.value.replace(/(\d{4})(\d{6})(\d{3})(\d{1})/,"$1-$2-$3\u2022$4")}},{headerName:"Ticket Value",field:"ticket_value"},{headerName:"Ticket Name",field:"ticket_name"},{headerName:"",field:"button_field",cellRenderer:"cellControlButtons",cellStyle:{"text-align":"right"}}],U={cellControlButtons:function(e){return Object(c.jsx)("span",{children:Object(c.jsx)(h.a,{variant:"outline-secondary",size:"sm",onClick:function(){var t=P.current.getDisplayedRowAtIndex(e.node.rowIndex).data.book_number;T=T.filter((function(e){return e.book_number!==t})),console.log(T),P.current.setRowData(T)},children:"Remove"})})}};function J(e){var t=/^[0-9]{4}/.exec(e);null!==t&&_.a.get("/api/isi-game-details/"+t[0]).then((function(e){return e.data.rows})).then((function(e){return e.map((function(e){return{ticket_value:e.ticket_value,ticket_name:e.ticket_name}}))})).then((function(t){T.push({book_number:e,ticket_name:t[0].ticket_name,ticket_value:t[0].ticket_value}),P.current.setRowData(T)})).catch((function(e){"not_exists"===e.response.data.err_type&&(I=t[0],v(!0))}))}return Object(c.jsxs)("div",{children:[Object(c.jsx)(x,{proceed:"true",from:"/isimenu",label:"Receive Shipment"}),Object(c.jsxs)(f.a,{show:i,onHide:V,backdrop:"static",keyboard:!1,children:[Object(c.jsx)(f.a.Header,{children:Object(c.jsx)(f.a.Title,{children:"Enter Shipment Details"})}),Object(c.jsxs)(f.a.Body,{children:[Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsx)(p.a.Prepend,{children:Object(c.jsx)(p.a.Text,{children:"Received Date"})}),Object(c.jsx)(w.a,{className:"form-control",selected:S,dateFormat:"dd/MM/yyyy",onChange:function(e){return D(e)}})]}),Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsx)(p.a.Prepend,{children:Object(c.jsx)(p.a.Text,{children:"Shipment ID"})}),Object(c.jsx)(g.a,{type:"text",onChange:function(e){var t=/^[0-9]*$/.exec(e.target.value);null!==t?(e.target.value=t[0],R[e.target.name]=e.target.value):e.target.value=R[e.target.name]},name:"shipment_id",defaultValue:R.shipment_id})]})]}),Object(c.jsxs)(f.a.Footer,{children:[Object(c.jsx)(h.a,{variant:"secondary",onClick:function(){R.shipment_id="",e.push("/isimenu")},children:"Cancel"}),Object(c.jsx)(h.a,{variant:"danger",onClick:A?null:function(){F(!0),R.date_received=S.getFullYear()+"-"+(S.getMonth()+1)+"-"+S.getDate(),_.a.post("/api/shipment-details-upload",R).then((function(){return r(!1)})).then((function(){return F(!1)})).then(R.shipment_id="").catch((function(e){"already_exists"===e.response.data.err_type&&(V(),j(!0))}))},children:A?"Adding...":"Add Shipment"})]})]}),Object(c.jsxs)(f.a,{show:d,onHide:$,backdrop:"static",keyboard:!1,children:[Object(c.jsxs)(f.a.Body,{children:["Shipment ",Object(c.jsx)("i",{children:R.shipment_id})," has already been added. Would you like to edit this shipment instead?"]}),Object(c.jsxs)(f.a.Footer,{children:[Object(c.jsx)(h.a,{variant:"secondary",onClick:function(){$(),r(!0),F(!1)},children:"Cancel"}),Object(c.jsx)(h.a,{variant:"danger",onClick:$,children:"Edit"})]})]}),Object(c.jsxs)(f.a,{show:O,onHide:L,backdrop:"static",keyboard:!1,children:[Object(c.jsxs)(f.a.Body,{children:["Game number ",Object(c.jsx)("i",{children:I})," does not exist. Please add it into the system through the ",Object(c.jsx)("b",{children:"Manage"})," page."]}),Object(c.jsx)(f.a.Footer,{children:Object(c.jsx)(h.a,{variant:"danger",onClick:L,children:"Okay"})})]}),Object(c.jsx)("div",{className:"enter-isi-book",children:Object(c.jsxs)(p.a,{className:"mb-3",children:[Object(c.jsx)(p.a.Prepend,{children:Object(c.jsx)(p.a.Text,{children:"Scan / Enter ISI Book Number"})}),Object(c.jsx)(g.a,{type:"text",onKeyUp:function(e){N=e.target.value,"Enter"===e.key&&(J(N),e.target.value="")}}),Object(c.jsx)(p.a.Append,{children:Object(c.jsx)(h.a,{onClick:function(){J(N)},variant:"outline-success",children:"Add"})})]})}),Object(c.jsx)("div",{className:"ag-theme-alpine",style:{width:"100%"},children:Object(c.jsx)(k.AgGridReact,{domLayout:"autoHeight",columnDefs:z,rowData:E,animateRows:!0,onGridReady:function(e){P.current=e.api,P.current.sizeColumnsToFit(),P.current.setHeaderHeight(0)},gridOptions:{suppressNoRowsOverlay:!0},frameworkComponents:U})})]})}function M(){return Object(a.useEffect)((function(){document.title="ISI Reports - Mona"}),[]),Object(c.jsx)("div",{children:Object(c.jsx)(x,{proceed:"false",from:"/isimenu"})})}function B(){return Object(a.useEffect)((function(){document.title="Sign Out ISI - Mona"}),[]),Object(c.jsx)("div",{children:Object(c.jsx)(x,{proceed:"false",from:"/isimenu"})})}function A(){return Object(c.jsx)(l.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{exact:!0,path:"/",children:Object(c.jsx)(u,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/isimenu",children:Object(c.jsx)(O,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/isimanage",children:Object(c.jsx)(C,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/isireceive",children:Object(c.jsx)(D,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/isireport",children:Object(c.jsx)(M,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/isisignout",children:Object(c.jsx)(B,{})})]})})})}var F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,222)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(A,{})}),document.getElementById("root")),F()},77:function(e,t,n){}},[[209,1,2]]]);
//# sourceMappingURL=main.05e8c72e.chunk.js.map